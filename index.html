<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>College Park Community Enhancement Fund Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<style>
  :root {
    --navy: #0a1628;
    --navy2: #112244;
    --accent: #1a73e8;
    --accent2: #0d5bbb;
    --gold: #f4b942;
    --green: #27ae60;
    --red: #e74c3c;
    --orange: #e67e22;
    --purple: #8e44ad;
    --teal: #16a085;
    --gray1: #f0f4f8;
    --gray2: #e2e8f0;
    --gray3: #94a3b8;
    --text: #1e293b;
    --text2: #475569;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--gray1); color: var(--text); }

  /* HEADER */
  header {
    background: linear-gradient(135deg, var(--navy) 0%, var(--navy2) 100%);
    color: white; padding: 0;
    box-shadow: 0 2px 12px rgba(0,0,0,0.3);
    position: sticky; top: 0; z-index: 100;
  }
  .header-inner {
    max-width: 1400px; margin: 0 auto;
    display: flex; align-items: center; justify-content: space-between;
    padding: 14px 24px;
  }
  .header-title { font-size: 1.2rem; font-weight: 700; letter-spacing: 0.3px; }
  .header-sub { font-size: 0.78rem; color: rgba(255,255,255,0.65); margin-top: 2px; }
  .header-badge {
    background: var(--gold); color: var(--navy);
    padding: 4px 12px; border-radius: 20px;
    font-size: 0.72rem; font-weight: 700; letter-spacing: 0.5px;
  }
  .breadcrumb {
    background: rgba(255,255,255,0.07);
    padding: 6px 24px; font-size: 0.8rem; color: rgba(255,255,255,0.7);
    display: flex; gap: 8px; align-items: center;
    max-width: 1400px; margin: 0 auto;
  }
  .breadcrumb span { cursor: pointer; }
  .breadcrumb span:hover { color: white; }
  .breadcrumb .sep { opacity: 0.4; }

  /* MAIN LAYOUT */
  main { max-width: 1400px; margin: 0 auto; padding: 28px 24px; }

  /* SECTION VISIBILITY */
  .section { display: none; }
  .section.active { display: block; }

  /* OVERVIEW CARDS */
  .ward-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 20px; margin-bottom: 32px;
  }
  .ward-card {
    background: white; border-radius: 14px;
    padding: 22px; cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    border: 2px solid transparent;
    transition: all 0.2s ease;
    position: relative; overflow: hidden;
  }
  .ward-card::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px;
    background: var(--card-color, var(--accent));
  }
  .ward-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    border-color: var(--card-color, var(--accent));
  }
  .ward-card-title { font-size: 0.8rem; font-weight: 600; color: var(--text2); text-transform: uppercase; letter-spacing: 0.8px; }
  .ward-card-amount { font-size: 2rem; font-weight: 800; margin: 8px 0 4px; color: var(--text); }
  .ward-card-sub { font-size: 0.8rem; color: var(--text2); }
  .ward-card-bar { height: 6px; background: var(--gray2); border-radius: 3px; margin-top: 14px; overflow: hidden; }
  .ward-card-fill { height: 100%; border-radius: 3px; background: var(--card-color, var(--accent)); transition: width 0.8s ease; }
  .ward-card-arrow {
    position: absolute; right: 18px; top: 50%;
    transform: translateY(-50%);
    font-size: 1.4rem; opacity: 0.25;
  }
  .ward-card-pct { font-size: 0.75rem; color: var(--card-color, var(--accent)); font-weight: 700; margin-top: 4px; }

  /* STAT CARDS */
  .stat-row { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px; margin-bottom: 28px; }
  .stat-card {
    background: white; border-radius: 12px; padding: 18px 20px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.06);
  }
  .stat-label { font-size: 0.72rem; color: var(--text2); text-transform: uppercase; letter-spacing: 0.8px; font-weight: 600; }
  .stat-val { font-size: 1.6rem; font-weight: 800; margin-top: 4px; }
  .stat-note { font-size: 0.72rem; color: var(--text2); margin-top: 2px; }

  /* CHARTS */
  .charts-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 28px; }
  @media (max-width: 800px) { .charts-grid { grid-template-columns: 1fr; } }
  .chart-card {
    background: white; border-radius: 14px; padding: 22px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.06);
  }
  .chart-card.full { grid-column: 1 / -1; }
  .chart-title { font-size: 0.85rem; font-weight: 700; color: var(--text2); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 16px; }
  .chart-wrap { position: relative; height: 280px; }
  .chart-wrap.tall { height: 360px; }

  /* SECTION HEADER */
  .section-header { display: flex; align-items: center; gap: 14px; margin-bottom: 24px; }
  .section-header h2 { font-size: 1.5rem; font-weight: 800; }
  .section-header .back-btn {
    background: var(--navy); color: white;
    border: none; padding: 8px 16px; border-radius: 8px;
    cursor: pointer; font-size: 0.8rem; font-weight: 600;
    display: flex; align-items: center; gap: 6px;
    transition: background 0.15s;
  }
  .section-header .back-btn:hover { background: var(--accent); }
  .ward-dot {
    width: 14px; height: 14px; border-radius: 50%;
    display: inline-block;
  }

  /* FUND TYPE PILLS */
  .filter-row { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 20px; }
  .filter-pill {
    padding: 6px 16px; border-radius: 20px; border: 2px solid var(--gray2);
    background: white; cursor: pointer; font-size: 0.82rem; font-weight: 600;
    transition: all 0.15s; color: var(--text2);
  }
  .filter-pill.active, .filter-pill:hover {
    background: var(--navy); color: white; border-color: var(--navy);
  }

  /* TRANSACTION TABLE */
  .table-wrap { background: white; border-radius: 14px; box-shadow: 0 1px 4px rgba(0,0,0,0.06); overflow: hidden; }
  .table-header { padding: 16px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--gray2); }
  .table-title { font-size: 0.85rem; font-weight: 700; color: var(--text2); text-transform: uppercase; letter-spacing: 0.5px; }
  .search-box {
    padding: 7px 14px; border: 1.5px solid var(--gray2); border-radius: 8px;
    font-size: 0.85rem; outline: none; width: 220px;
  }
  .search-box:focus { border-color: var(--accent); }
  table { width: 100%; border-collapse: collapse; font-size: 0.84rem; }
  th { background: var(--gray1); padding: 10px 14px; text-align: left; font-size: 0.72rem; text-transform: uppercase; letter-spacing: 0.6px; color: var(--text2); font-weight: 700; }
  td { padding: 11px 14px; border-bottom: 1px solid var(--gray2); }
  tr:last-child td { border-bottom: none; }
  tr:hover td { background: var(--gray1); }
  .fund-badge {
    display: inline-block; padding: 2px 10px; border-radius: 12px;
    font-size: 0.72rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.4px;
  }
  .fund-Capital { background: #dbeafe; color: #1e40af; }
  .fund-Non-Capital { background: #dcfce7; color: #166534; }
  .fund-Discretionary { background: #fef3c7; color: #92400e; }
  .fund-Travel { background: #f3e8ff; color: #6b21a8; }
  .amount-cell { font-weight: 700; font-variant-numeric: tabular-nums; }
  .credit-row td { color: var(--red); }
  .vendor-link { color: var(--accent); cursor: pointer; text-decoration: underline; text-decoration-style: dotted; }
  .vendor-link:hover { color: var(--accent2); }

  /* BUDGET GAUGES */
  .gauge-row { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 16px; margin-bottom: 28px; }
  .gauge-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 1px 4px rgba(0,0,0,0.06); }
  .gauge-label { font-size: 0.72rem; text-transform: uppercase; letter-spacing: 0.8px; color: var(--text2); font-weight: 600; }
  .gauge-amount { font-size: 1.35rem; font-weight: 800; margin: 6px 0 3px; }
  .gauge-budget { font-size: 0.77rem; color: var(--text2); }
  .gauge-bar-bg { height: 8px; background: var(--gray2); border-radius: 4px; margin-top: 12px; overflow: hidden; }
  .gauge-bar-fill { height: 100%; border-radius: 4px; transition: width 0.8s ease; }
  .gauge-pct { font-size: 0.78rem; font-weight: 700; margin-top: 5px; }

  /* VENDOR MODAL */
  .modal-overlay {
    display: none; position: fixed; inset: 0;
    background: rgba(0,0,0,0.5); z-index: 200;
    align-items: center; justify-content: center;
  }
  .modal-overlay.open { display: flex; }
  .modal {
    background: white; border-radius: 18px; width: 90%; max-width: 780px;
    max-height: 85vh; overflow: hidden; display: flex; flex-direction: column;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  }
  .modal-head {
    padding: 22px 26px 16px; background: var(--navy); color: white;
    display: flex; justify-content: space-between; align-items: flex-start;
  }
  .modal-head h3 { font-size: 1.1rem; font-weight: 800; }
  .modal-head .close-btn {
    background: rgba(255,255,255,0.15); border: none; color: white;
    width: 32px; height: 32px; border-radius: 50%; cursor: pointer;
    font-size: 1.1rem; display: flex; align-items: center; justify-content: center;
  }
  .modal-head .close-btn:hover { background: rgba(255,255,255,0.3); }
  .modal-stats { padding: 16px 26px; background: var(--gray1); display: flex; gap: 24px; border-bottom: 1px solid var(--gray2); }
  .modal-stat { }
  .modal-stat-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.6px; color: var(--text2); font-weight: 600; }
  .modal-stat-val { font-size: 1.2rem; font-weight: 800; margin-top: 2px; }
  .modal-body { padding: 20px 26px; overflow-y: auto; }
  .modal-table { width: 100%; border-collapse: collapse; font-size: 0.83rem; }
  .modal-table th { background: var(--gray1); padding: 9px 12px; text-align: left; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text2); font-weight: 700; }
  .modal-table td { padding: 10px 12px; border-bottom: 1px solid var(--gray2); }
  .modal-table tr:last-child td { border-bottom: none; }
  .ward-chip {
    display: inline-block; padding: 2px 10px; border-radius: 10px;
    font-size: 0.7rem; font-weight: 700;
  }

  /* FOOTER */
  footer { text-align: center; padding: 28px; color: var(--gray3); font-size: 0.78rem; }
  footer a { color: var(--accent); }

  /* RESPONSIVE */
  @media (max-width: 600px) {
    .charts-grid { grid-template-columns: 1fr; }
    .ward-grid { grid-template-columns: 1fr; }
    .header-title { font-size: 1rem; }
    main { padding: 16px; }
    .search-box { width: 140px; }
  }
</style>
</head>
<body>

<header>
  <div class="header-inner">
    <div>
      <div class="header-title">College Park Community Enhancement Fund</div>
      <div class="header-sub">FY 2025–26 Spending Transparency Dashboard</div>
    </div>
    <div class="header-badge">PUBLIC RECORD</div>
  </div>
  <div class="breadcrumb" id="breadcrumb">
    <span onclick="showOverview()" style="color:rgba(255,255,255,0.5)">All Wards Overview</span>
  </div>
</header>

<!-- VENDOR MODAL -->
<div class="modal-overlay" id="vendorModal" onclick="if(event.target===this)closeModal()">
  <div class="modal">
    <div class="modal-head">
      <div>
        <div style="font-size:0.72rem;opacity:0.6;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:4px">Vendor Detail</div>
        <h3 id="modalVendorName">Vendor Name</h3>
      </div>
      <button class="close-btn" onclick="closeModal()">✕</button>
    </div>
    <div class="modal-stats">
      <div class="modal-stat">
        <div class="modal-stat-label">Total Paid</div>
        <div class="modal-stat-val" id="modalTotal">$0</div>
      </div>
      <div class="modal-stat">
        <div class="modal-stat-label">Transactions</div>
        <div class="modal-stat-val" id="modalCount">0</div>
      </div>
      <div class="modal-stat">
        <div class="modal-stat-label">Wards Served</div>
        <div class="modal-stat-val" id="modalWards">—</div>
      </div>
    </div>
    <div class="modal-body">
      <table class="modal-table">
        <thead><tr><th>Date</th><th>Ward</th><th>Fund</th><th>Description</th><th style="text-align:right">Amount</th></tr></thead>
        <tbody id="modalRows"></tbody>
      </table>
    </div>
  </div>
</div>

<main>

<!-- ===== OVERVIEW SECTION ===== -->
<div class="section active" id="sec-overview">
  <div class="stat-row" id="overview-stats"></div>
  <div class="ward-grid" id="ward-grid"></div>
  <div class="charts-grid">
    <div class="chart-card">
      <div class="chart-title">Monthly Spending — All Wards</div>
      <div class="chart-wrap"><canvas id="monthlyAllChart"></canvas></div>
    </div>
    <div class="chart-card">
      <div class="chart-title">Spending by Fund Type</div>
      <div class="chart-wrap"><canvas id="fundPieChart"></canvas></div>
    </div>
    <div class="chart-card full">
      <div class="chart-title">Top Vendors — All Wards (click to see detail)</div>
      <div class="chart-wrap tall"><canvas id="vendorAllChart"></canvas></div>
    </div>
  </div>
</div>

<!-- ===== WARD DETAIL SECTION ===== -->
<div class="section" id="sec-ward">
  <div class="section-header">
    <button class="back-btn" onclick="showOverview()">← All Wards</button>
    <h2 id="ward-detail-title">Ward Detail</h2>
  </div>
  <div class="gauge-row" id="ward-gauges"></div>
  <div class="charts-grid">
    <div class="chart-card">
      <div class="chart-title">Monthly Spending</div>
      <div class="chart-wrap"><canvas id="wardMonthlyChart"></canvas></div>
    </div>
    <div class="chart-card">
      <div class="chart-title">Top Vendors</div>
      <div class="chart-wrap"><canvas id="wardVendorChart"></canvas></div>
    </div>
  </div>
  <div class="filter-row" id="ward-filters"></div>
  <div class="table-wrap">
    <div class="table-header">
      <div class="table-title">Transactions</div>
      <input class="search-box" type="text" id="ward-search" placeholder="Search vendor or description…" oninput="renderWardTable()">
    </div>
    <div style="overflow-x:auto">
      <table>
        <thead><tr><th>Date</th><th>Fund</th><th>Vendor</th><th>Description</th><th>Payment</th><th style="text-align:right">Amount</th></tr></thead>
        <tbody id="ward-table-body"></tbody>
      </table>
    </div>
    <div style="padding:12px 20px;font-size:0.8rem;color:var(--text2)" id="ward-table-count"></div>
  </div>
</div>

</main>

<footer>
  Data sourced from City of College Park General Ledger Reports · FY 2025–26 · Last updated Feb 2026 ·
  <a href="https://mayorbianca.com" target="_blank">mayorbianca.com</a>
</footer>

<script>
const ALL_TRANSACTIONS = [{"date":"2025-10-13","vendor":"ROYAL TROPHIES","description":"Painted gold plates","amount":42.02,"fund_type":"Non-Capital","ward":"Mayor","payment_type":"Check","payment_number":"249686","is_credit":false},{"date":"2025-10-13","vendor":"KELLI SAYS SO LLC","description":"Mayor's Reading Club Pizza","amount":297.25,"fund_type":"Non-Capital","ward":"Mayor","payment_type":"EFT","payment_number":"12480","is_credit":false},{"date":"2025-07-25","vendor":"MOTLEY BROOM, BIANCA","description":"Travel Reimbursement - Savannah","amount":2131.9,"fund_type":"Discretionary","ward":"Mayor","payment_type":"EFT","payment_number":"11512","is_credit":false},{"date":"2025-10-11","vendor":"AFRICAN AMERICAN MAYORS","description":"Mayor Dues","amount":1000.0,"fund_type":"Discretionary","ward":"Mayor","payment_type":"Check","payment_number":"250718","is_credit":false},{"date":"2025-07-01","vendor":"PROOF OF THE PUDDING (City Mayor Motley-Broom's Senior Summit","description":"","amount":5393.75,"fund_type":"Travel & Meetings","ward":"Mayor","payment_type":"Check","payment_number":"249601","is_credit":false},{"date":"2025-07-01","vendor":"MOTLEY BROOM, BIANCA","description":"Travel Reimbursement - NLC Conference","amount":743.02,"fund_type":"Travel & Meetings","ward":"Mayor","payment_type":"EFT","payment_number":"11512","is_credit":false},{"date":"2025-07-01","vendor":"MOTLEY BROOM, BIANCA","description":"Travel Reimbursement - MEAG","amount":1261.57,"fund_type":"Travel & Meetings","ward":"Mayor","payment_type":"EFT","payment_number":"11512","is_credit":false},{"date":"2026-01-12","vendor":"MOTLEY BROOM, BIANCA","description":"Travel Reimbursement - MEAG Summit","amount":832.89,"fund_type":"Travel & Meetings","ward":"Mayor","payment_type":"EFT","payment_number":"13172","is_credit":false},{"date":"2026-01-12","vendor":"MOTLEY BROOM, BIANCA","description":"Mileage reimbursement to/from Chateau","amount":73.16,"fund_type":"Travel & Meetings","ward":"Mayor","payment_type":"EFT","payment_number":"13172","is_credit":false},{"date":"2025-07-03","vendor":"JAMELLE E. MCKENZIE","description":"Per Diem for Mayor Pro Tem MEAG","amount":340.0,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"248128","is_credit":false},{"date":"2025-07-03","vendor":"JAMELLE E. MCKENZIE","description":"Travel Reimbursement - MEAG","amount":467.96,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"248976","is_credit":false},{"date":"2025-07-03","vendor":"JAMELLE E. MCKENZIE","description":"Travel Reimbursement - MEAG","amount":807.0,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"248908","is_credit":false},{"date":"2025-09-09","vendor":"OLIVIA DORSEY","description":"Travel Reimbursement - GEDA","amount":255.0,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"249816","is_credit":false},{"date":"2025-09-09","vendor":"OLIVIA DORSEY","description":"Travel Reimbursement - GEDA","amount":779.55,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"249083","is_credit":false},{"date":"2025-09-09","vendor":"OLIVIA DORSEY","description":"Parking Reimbursement for GEDA","amount":90.0,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"249294","is_credit":false},{"date":"2025-09-26","vendor":"JAMELLE E. MCKENZIE","description":"Per Diem-LAMP Summit - 10/8/25 -","amount":255.0,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"249292","is_credit":false},{"date":"2025-09-26","vendor":"OLIVIA DORSEY","description":"Travel Advance for LAMP Summit 10/08-","amount":255.0,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"249294","is_credit":false},{"date":"2025-11-12","vendor":"JAMELLE E. MCKENZIE","description":"Hotel for NLC Conference - J McKenzie","amount":667.5,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"249956","is_credit":false},{"date":"2025-11-12","vendor":"JAMELLE E. MCKENZIE","description":"2025 NLC City Summit Registration for J","amount":1015.0,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"249956","is_credit":false},{"date":"2025-11-12","vendor":"JAMELLE E. MCKENZIE","description":"Per Diem for NLC Conference","amount":255.0,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"249956","is_credit":false},{"date":"2025-11-13","vendor":"JAMELLE E. MCKENZIE","description":"Reimbursement for Uber from Salt Lake","amount":40.04,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"250204","is_credit":false},{"date":"2025-12-08","vendor":"JAMELLE E. MCKENZIE","description":"Travel reimbursement and per diem for","amount":1162.31,"fund_type":"Travel & Meetings","ward":"Ward 1","payment_type":"Check","payment_number":"250223","is_credit":false},{"date":"2025-10-20","vendor":"HARPSCAPE ENVIRONMENTAL","description":"Ward 2 Pet Waste Stations installation","amount":5232.0,"fund_type":"Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"12462","is_credit":false},{"date":"2025-11-06","vendor":"Amigo Fence & Stain","description":"Ward 2 2620 Fence Installation Project","amount":22000.0,"fund_type":"Capital","ward":"Ward 2","payment_type":"Check","payment_number":"249933","is_credit":false},{"date":"2025-11-06","vendor":"PINNACLE MAINTENANCE LLC","description":"Ward 2 Shrub Installation","amount":3650.0,"fund_type":"Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"12691","is_credit":false},{"date":"2025-12-02","vendor":"KANOOM CONSTRUCTION","description":"Single -family home demolition-Ward 2","amount":-24650.0,"fund_type":"Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"13080","is_credit":true},{"date":"2025-12-02","vendor":"INTEGRATED SECURITY","description":"Cameras for Subrena Willis Park-Ward 2","amount":-5178.21,"fund_type":"Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"12849","is_credit":true},{"date":"2025-12-10","vendor":"KANOOM CONSTRUCTION","description":"Single -family home demolition-Ward 2","amount":24650.0,"fund_type":"Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"13080","is_credit":false},{"date":"2025-12-10","vendor":"INTEGRATED SECURITY","description":"Cameras for Subrena Willis Park-Ward 2","amount":5178.21,"fund_type":"Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"12849","is_credit":false},{"date":"2025-10-08","vendor":"BESTPRINT & DESIGN","description":"10 signs for Ward 2","amount":800.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"249585","is_credit":false},{"date":"2025-10-08","vendor":"SUGA 2020 LIMITED CO.","description":"Balloons for Ward 2 job fair","amount":350.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"12472","is_credit":false},{"date":"2025-10-08","vendor":"SIMS AND WARD MULTI-","description":"Ward 2 Event Planner","amount":1400.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"249687","is_credit":false},{"date":"2025-10-08","vendor":"U-HAUL INTERNATIONAL INC.","description":"Storage fees for Ward 2","amount":1415.2,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"249943","is_credit":false},{"date":"2025-10-13","vendor":"ARAYPA FACTORY LLC","description":"Ward 2 Canopy top and frame","amount":435.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"249934","is_credit":false},{"date":"2025-10-15","vendor":"LITTLE KINGDOM BUILDER,","description":"Ward 2 Race car experience event","amount":2500.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"249938","is_credit":false},{"date":"2025-10-16","vendor":"RIGHT SALES & SERVICE","description":"Blank sign boards for Ward 2","amount":225.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"12470","is_credit":false},{"date":"2025-11-03","vendor":"DOBSON FOOD GROUP LLC","description":"Food for Ward 2 Community Meeting","amount":650.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"12461","is_credit":false},{"date":"2025-11-03","vendor":"MOODY'S GARAGE, INC.","description":"To move a vehicle for a paving project -","amount":75.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"12467","is_credit":false},{"date":"2025-11-03","vendor":"MOODY'S WRECKER SERVICE","description":"Car removal for Ward 2 project","amount":150.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"249939","is_credit":false},{"date":"2025-11-03","vendor":"EIGHT 11 COLLECTIVE, LLC","description":"Ward 2 City Wide Job Fair","amount":3000.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"249952","is_credit":false},{"date":"2025-11-04","vendor":"FULTON ATLANTA COMMUNITY Ward 2 Employment Readiness Program","description":"","amount":2500.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"249953","is_credit":false},{"date":"2025-11-06","vendor":"U-HAUL INTERNATIONAL INC.","description":"Ward 2 Storage Room 1003","amount":151.9,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250068","is_credit":false},{"date":"2025-11-07","vendor":"CYBER SAVVY CHIC","description":"Ward 2 Project Management","amount":1990.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"12543","is_credit":false},{"date":"2025-11-17","vendor":"U-HAUL INTERNATIONAL INC.","description":"Ward 2 Storage Room 1003","amount":186.9,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250068","is_credit":false},{"date":"2025-11-17","vendor":"SCARLET SIMS","description":"For multi-family services for Ward 2","amount":1400.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250116","is_credit":false},{"date":"2025-12-01","vendor":"U-HAUL INTERNATIONAL INC. Ward 2 Storage Room 1153","description":"","amount":186.9,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250211","is_credit":false},{"date":"2025-12-01","vendor":"FULTON ATLANTA COMMUNITY Ward 2 Employment Readiness Program","description":"","amount":2500.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250203","is_credit":false},{"date":"2025-12-01","vendor":"SCARLET SIMS","description":"Event Planning and Multi-family Services","amount":1400.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250209","is_credit":false},{"date":"2025-12-01","vendor":"CAPACITY BUILDERS INC","description":"Education and Community Outreach","amount":5000.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"12699","is_credit":false},{"date":"2025-12-01","vendor":"ACSENTIAL GROUP INC","description":"Contract Review, Data Collection &","amount":2500.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250217","is_credit":false},{"date":"2025-12-02","vendor":"ACSENTIAL GROUP INC","description":"Contract Review, Data Collection &","amount":-2500.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250217","is_credit":true},{"date":"2025-12-02","vendor":"VISION FITNESS LLC","description":"Halo City Wellness Initiative-Ward 2","amount":-17500.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250325","is_credit":true},{"date":"2025-12-05","vendor":"VISION FITNESS LLC","description":"Halo City Wellness Initiative-Ward 2","amount":17500.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250325","is_credit":false},{"date":"2025-12-08","vendor":"ARAYPA FACTORY LLC","description":"Tablecloths for Ward 2","amount":279.96,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250418","is_credit":false},{"date":"2025-12-12","vendor":"CYBER SAVVY CHIC","description":"Ward 2 Project Management","amount":1990.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"12846","is_credit":false},{"date":"2025-12-13","vendor":"GEORGIA INTERNATIONAL","description":"BIDA Food-Ward 2","amount":9500.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250756","is_credit":false},{"date":"2025-12-13","vendor":"HARPSCAPE ENVIRONMENTAL","description":"Ward 2 Pet Waste Stations on Godby Rd","amount":1998.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"12941","is_credit":false},{"date":"2025-12-13","vendor":"ROYAL TROPHIES","description":"Plaque-Ward 2","amount":88.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250677","is_credit":false},{"date":"2025-12-18","vendor":"NOEL SESMAS TREE SERVICE","description":"Sesmas Inv I6328-1-1","amount":11500.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"EFT","payment_number":"13113","is_credit":false},{"date":"2026-01-01","vendor":"VISION FITNESS LLC","description":"Halo City Wellness Initiative-Ward 2","amount":17500.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250764","is_credit":false},{"date":"2026-01-01","vendor":"FULTON ATLANTA COMMUNITY Ward 2 Employment Readiness Program","description":"","amount":2500.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250755","is_credit":false},{"date":"2026-01-01","vendor":"HEJ PRODUCTION","description":"Ward 2 Boys II Men Consultant","amount":5000.0,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250757","is_credit":false},{"date":"2026-01-12","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":41.97,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250891","is_credit":false},{"date":"2026-01-12","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":478.83,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250891","is_credit":false},{"date":"2026-01-14","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":-41.97,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250891","is_credit":true},{"date":"2026-01-14","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":-478.83,"fund_type":"Non-Capital","ward":"Ward 2","payment_type":"Check","payment_number":"250891","is_credit":true},{"date":"2025-08-21","vendor":"CARN, JOSEPH A.","description":"City Staff Dinner Meeting","amount":156.7,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"248827","is_credit":false},{"date":"2025-09-03","vendor":"CARN, JOSEPH A.","description":"Reimbursements","amount":642.88,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"248904","is_credit":false},{"date":"2025-09-03","vendor":"CARN, JOSEPH A.","description":"Reimbursement for discretionary items","amount":440.37,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"249074","is_credit":false},{"date":"2025-09-03","vendor":"CARN, JOSEPH A.","description":"Reimbursement for discretionary items","amount":316.29,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"249074","is_credit":false},{"date":"2025-09-03","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Discretionary","amount":566.66,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"249159","is_credit":false},{"date":"2025-09-10","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Brandon Park Sign-","amount":500.0,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"249811","is_credit":false},{"date":"2025-09-15","vendor":"CARN, JOSEPH A.","description":"Reimbursement for discretionary items-","amount":498.27,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"249422","is_credit":false},{"date":"2025-10-21","vendor":"CARN, JOSEPH A.","description":"Ward 2 Boyz to Men race car event","amount":150.0,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"249784","is_credit":false},{"date":"2025-11-03","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":1017.38,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"249935","is_credit":false},{"date":"2025-11-03","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":141.34,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"250219","is_credit":false},{"date":"2025-11-03","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":593.72,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"249948","is_credit":false},{"date":"2025-11-03","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":632.1,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"249948","is_credit":false},{"date":"2025-11-03","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":250.28,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"250113","is_credit":false},{"date":"2025-11-03","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":421.39,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"250113","is_credit":false},{"date":"2025-12-02","vendor":"CARN, JOSEPH A.","description":"Ward 2 expenses reimbursement","amount":294.39,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"250201","is_credit":false},{"date":"2025-12-02","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":104.49,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"250219","is_credit":false},{"date":"2025-12-07","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":63.74,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"250420","is_credit":false},{"date":"2025-12-07","vendor":"CARN, JOSEPH A.","description":"Ward 2 expenses reimbursement","amount":254.66,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"250420","is_credit":false},{"date":"2025-12-07","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":288.02,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"250420","is_credit":false},{"date":"2025-12-07","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":625.26,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"250420","is_credit":false},{"date":"2025-12-08","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":556.72,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"250505","is_credit":false},{"date":"2025-12-10","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":101.03,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"250674","is_credit":false},{"date":"2025-12-12","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":125.46,"fund_type":"Discretionary","ward":"Ward 2","payment_type":"Check","payment_number":"250674","is_credit":false},{"date":"2025-07-01","vendor":"ENTERPRISE RENT A CAR","description":"Rental car for Councilman Carn","amount":228.5,"fund_type":"Travel & Meetings","ward":"Ward 2","payment_type":"Check","payment_number":"249424","is_credit":false},{"date":"2025-07-01","vendor":"CARN, JOSEPH A.","description":"Reimbursement for meeting and parking","amount":50.15,"fund_type":"Travel & Meetings","ward":"Ward 2","payment_type":"Check","payment_number":"248362","is_credit":false},{"date":"2026-01-06","vendor":"CARN, JOSEPH A.","description":"Per Diem for ICLMG Conference in Las","amount":170.0,"fund_type":"Travel & Meetings","ward":"Ward 2","payment_type":"Check","payment_number":"250568","is_credit":false},{"date":"2026-01-06","vendor":"CARN, JOSEPH A.","description":"Reimbursement for Ward 2 expenditures","amount":124.67,"fund_type":"Travel & Meetings","ward":"Ward 2","payment_type":"Check","payment_number":"250852","is_credit":false},{"date":"2026-01-06","vendor":"CARN, JOSEPH A.","description":"Travel Advance for National Community","amount":340.0,"fund_type":"Travel & Meetings","ward":"Ward 2","payment_type":"Check","payment_number":"250891","is_credit":false},{"date":"2025-12-22","vendor":"QUEST VALUATION &","description":"Ward 3 Appraisal Report Fees","amount":5500.0,"fund_type":"Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"12997","is_credit":false},{"date":"2025-10-07","vendor":"TERICO M HARPER","description":"Video Edit for Councilwoman Tracie","amount":50.0,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"Check","payment_number":"249592","is_credit":false},{"date":"2025-10-07","vendor":"KANOOM CONSTRUCTION","description":"Ward 3 Project Discovery-Project","amount":4166.67,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"12382","is_credit":false},{"date":"2025-10-07","vendor":"JADA DEXTER","description":"Reimbursement-Ward 3 CFA Heart of","amount":496.99,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"12292","is_credit":false},{"date":"2025-11-06","vendor":"BULLSEYE BEACH HOUSE LLC","description":"Voices of Unheard Senior Night","amount":4000.0,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"12459","is_credit":false},{"date":"2025-11-06","vendor":"KANOOM CONSTRUCTION","description":"Ward 3 Project Discovery-Project","amount":4166.67,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"12466","is_credit":false},{"date":"2025-11-06","vendor":"FAITH WALKERS COMMUNITY","description":"Ward 3 Relief Program","amount":100000.0,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"Check","payment_number":"250063","is_credit":false},{"date":"2025-11-07","vendor":"DISCOUNT MAILING SERVICES Mailing service fees/set up cost for Ward","description":"","amount":1275.0,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"Check","payment_number":"249950","is_credit":false},{"date":"2025-11-11","vendor":"JARDINE SPEARS AUTISM","description":"Community Support Services - Ward 3","amount":2500.0,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"Check","payment_number":"250065","is_credit":false},{"date":"2025-11-12","vendor":"DENMARK ASHBY, LLC","description":"Title Search, Exam and Certificate Prep","amount":3877.0,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"12688","is_credit":false},{"date":"2025-12-08","vendor":"JADA DEXTER","description":"Ward 3 Christmas on Godby expenses","amount":44.34,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"12700","is_credit":false},{"date":"2025-12-08","vendor":"LET'S DO BRUNCH LLC","description":"Ward 3 Christmas on Godby","amount":3316.88,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"12853","is_credit":false},{"date":"2025-12-08","vendor":"KANOOM CONSTRUCTION","description":"Ward 3 Project Discovery-Project","amount":4166.67,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"12852","is_credit":false},{"date":"2025-12-08","vendor":"KANOOM CONSTRUCTION","description":"Ward 3 Concrete Bleacher Repair","amount":5573.58,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"12852","is_credit":false},{"date":"2025-12-08","vendor":"KANOOM CONSTRUCTION","description":"Ward 3 Tree removal from Mural","amount":8963.0,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"13080","is_credit":false},{"date":"2025-12-08","vendor":"ALL ABOUT THE MINI'S","description":"Ward 3 town hall caterer","amount":2657.0,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"Check","payment_number":"250504","is_credit":false},{"date":"2025-12-09","vendor":"TERICO M HARPER","description":"Ward 3 End of Year recap video","amount":150.0,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"Check","payment_number":"250763","is_credit":false},{"date":"2025-12-09","vendor":"DESTINATION COLLEGE PARK","description":"Ward 3 December Holiday Events for","amount":8900.0,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"Check","payment_number":"250754","is_credit":false},{"date":"2025-12-17","vendor":"KANOOM CONSTRUCTION","description":"Ward 3 Project Discovery-Project","amount":4166.67,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"12991","is_credit":false},{"date":"2026-01-06","vendor":"LET'S DO BRUNCH LLC","description":"Ward 3 Brunch Room Rental","amount":380.63,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"13081","is_credit":false},{"date":"2026-01-06","vendor":"MTI LIMO & SHUTTLE","description":"Ward 3 Limo Svc - 01/18/26","amount":1040.0,"fund_type":"Non-Capital","ward":"Ward 3","payment_type":"EFT","payment_number":"13083","is_credit":false},{"date":"2025-11-17","vendor":"HUMANITY DIGNITY AND","description":"Legal Representation for Councilwoman","amount":2500.0,"fund_type":"Discretionary","ward":"Ward 3","payment_type":"EFT","payment_number":"12697","is_credit":false},{"date":"2025-11-17","vendor":"HUMANITY DIGNITY AND","description":"Legal Representation for Councilwoman","amount":2500.0,"fund_type":"Discretionary","ward":"Ward 3","payment_type":"EFT","payment_number":"12695","is_credit":false},{"date":"2025-07-03","vendor":"MARTINO-WHITE PRINTING,","description":"Yard Signs","amount":1035.0,"fund_type":"Travel & Meetings","ward":"Ward 3","payment_type":"Check","payment_number":"248212","is_credit":false},{"date":"2025-07-03","vendor":"TRACIE ARNOLD","description":"Travel Request Per DM","amount":510.0,"fund_type":"Travel & Meetings","ward":"Ward 3","payment_type":"Check","payment_number":"248127","is_credit":false},{"date":"2025-10-09","vendor":"PICCADILLY HOLDINGS, LLC","description":"Ward 3 Veterans Luncheon","amount":1259.95,"fund_type":"Travel & Meetings","ward":"Ward 3","payment_type":"Check","payment_number":"249962","is_credit":false},{"date":"2025-10-09","vendor":"CREATIONS BY JENAE, LLC","description":"Ward 3 Newsletter","amount":120.0,"fund_type":"Travel & Meetings","ward":"Ward 3","payment_type":"EFT","payment_number":"12290","is_credit":false},{"date":"2025-10-09","vendor":"TRACIE ARNOLD","description":"Ward 3 meetings reimbursement","amount":36.15,"fund_type":"Travel & Meetings","ward":"Ward 3","payment_type":"Check","payment_number":"249789","is_credit":false},{"date":"2025-10-20","vendor":"TRACIE ARNOLD","description":"Reimbursement for Ward 3 city official","amount":685.42,"fund_type":"Travel & Meetings","ward":"Ward 3","payment_type":"Check","payment_number":"249690","is_credit":false},{"date":"2025-10-10","vendor":"IGNITE RESOURCE CENTER CP American Water Resources service line","description":"","amount":3957.6,"fund_type":"Non-Capital","ward":"Ward 4","payment_type":"Check","payment_number":"249684","is_credit":false},{"date":"2025-11-12","vendor":"KANOOM CONSTRUCTION","description":"Ward 4 entrance gate installation of 8","amount":8352.85,"fund_type":"Non-Capital","ward":"Ward 4","payment_type":"EFT","payment_number":"12696","is_credit":false},{"date":"2025-11-12","vendor":"CHUMA WILLIAMS","description":"Ward 4 Botanical Gardens Banner","amount":3773.0,"fund_type":"Non-Capital","ward":"Ward 4","payment_type":"Check","payment_number":"250112","is_credit":false},{"date":"2025-11-12","vendor":"DANTE DAVIS DESIGN","description":"Ward 4 Botanical Garden Construction","amount":450.0,"fund_type":"Non-Capital","ward":"Ward 4","payment_type":"EFT","payment_number":"12864","is_credit":false},{"date":"2025-12-08","vendor":"DANTE DAVIS DESIGN","description":"Ward 4 PAWS on Main Dog Park Signage","amount":-1075.0,"fund_type":"Non-Capital","ward":"Ward 4","payment_type":"EFT","payment_number":"12864","is_credit":true},{"date":"2025-12-08","vendor":"WILLIAMS SCOTSMAN, INC.","description":"Trip charge and translift for Ward 4","amount":-1393.0,"fund_type":"Non-Capital","ward":"Ward 4","payment_type":"Check","payment_number":"250766","is_credit":true},{"date":"2025-12-09","vendor":"DANTE DAVIS DESIGN","description":"Ward 4 PAWS on Main Dog Park Signage","amount":1075.0,"fund_type":"Non-Capital","ward":"Ward 4","payment_type":"EFT","payment_number":"12864","is_credit":false},{"date":"2025-12-09","vendor":"WILLIAMS SCOTSMAN, INC.","description":"Trip charge and translift for Ward 4","amount":1393.0,"fund_type":"Non-Capital","ward":"Ward 4","payment_type":"Check","payment_number":"250766","is_credit":false},{"date":"2025-07-01","vendor":"ENTERPRISE RENT A CAR","description":"Car rental for MEAG Conference-","amount":716.31,"fund_type":"Travel & Meetings","ward":"Ward 4","payment_type":"Check","payment_number":"249077","is_credit":false},{"date":"2025-07-01","vendor":"RODERICK GAY","description":"Per Diem for Councilman Gay MEAG","amount":340.0,"fund_type":"Travel & Meetings","ward":"Ward 4","payment_type":"Check","payment_number":"248111","is_credit":false},{"date":"2025-07-01","vendor":"SNOWHEAD, LLC","description":"Ward 4 Community Enhancement","amount":300.0,"fund_type":"Travel & Meetings","ward":"Ward 4","payment_type":"Check","payment_number":"248186","is_credit":false},{"date":"2025-12-08","vendor":"RODERICK GAY","description":"Ward 4 Reimbursement","amount":51.07,"fund_type":"Travel & Meetings","ward":"Ward 4","payment_type":"Check","payment_number":"250432","is_credit":false},{"date":"2025-12-08","vendor":"RODERICK GAY","description":"Ward 4 Reimbursement","amount":36.76,"fund_type":"Travel & Meetings","ward":"Ward 4","payment_type":"Check","payment_number":"250432","is_credit":false},{"date":"2025-12-15","vendor":"GEORGIA INTERNATIONAL","description":"Ward 4 Botanical Garden Lunch/Meeting","amount":260.0,"fund_type":"Travel & Meetings","ward":"Ward 4","payment_type":"Check","payment_number":"250508","is_credit":false},{"date":"2026-01-26","vendor":"TANGIE WARRIOR","description":"Ward 4 Community Meeting Food","amount":126.97,"fund_type":"Travel & Meetings","ward":"Ward 4","payment_type":"Check","payment_number":"250954","is_credit":false},{"date":"2026-01-26","vendor":"GAY, RODERICK","description":"Ward 4 Lunch Meeting","amount":87.4,"fund_type":"Travel & Meetings","ward":"Ward 4","payment_type":"Check","payment_number":"250950","is_credit":false},{"date":"2025-10-13","vendor":"Hydroecology North America II","description":"Ward 1 Main Street Improvements Phase II","amount":3038.26,"fund_type":"Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250222","is_credit":false},{"date":"2025-10-14","vendor":"Jamelle E. McKenzie","description":"Crepe Myrtle Reimbursement - Main St (VOID)","amount":-1140.18,"fund_type":"Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250222","is_credit":true},{"date":"2025-10-21","vendor":"PowerCircle Management LLC","description":"Ward 1 Project Management Services","amount":3000.0,"fund_type":"Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12468","is_credit":false},{"date":"2025-11-05","vendor":"PowerCircle Management LLC","description":"Ward 1 Project Management Services","amount":3000.0,"fund_type":"Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12856","is_credit":false},{"date":"2025-11-11","vendor":"A & S Paving Inc.","description":"Ward 1 Street Resurfacing - Parkview Circle","amount":76967.75,"fund_type":"Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12539","is_credit":false},{"date":"2025-11-18","vendor":"La'Neice Littleton","description":"Ward 1 Professional Historical Consultant Services","amount":2950.0,"fund_type":"Capital","ward":"Ward 1","payment_type":"Check","payment_number":"249958","is_credit":false},{"date":"2025-11-25","vendor":"James Maceo Rogers","description":"Ward 1 Acrylic on Canvas","amount":10475.0,"fund_type":"Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12686","is_credit":false},{"date":"2025-12-09","vendor":"Pinnacle Maintenance LLC","description":"Main Street Revitalization Project Deposit","amount":20600.0,"fund_type":"Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12994","is_credit":false},{"date":"2025-12-11","vendor":"PowerCircle Management LLC","description":"Ward 1 Project Management Services","amount":3000.0,"fund_type":"Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12996","is_credit":false},{"date":"2025-12-15","vendor":"Hydroecology North America II","description":"Ward 1 Main Street Improvements Phase II","amount":5960.0,"fund_type":"Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250424","is_credit":false},{"date":"2025-12-15","vendor":"La'Neice Littleton","description":"Ward 1 Professional Historical Consultant Services","amount":2950.0,"fund_type":"Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250427","is_credit":false},{"date":"2026-01-05","vendor":"James Maceo Rogers","description":"Ward 1 Acrylic on Canvas","amount":10475.0,"fund_type":"Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12990","is_credit":false},{"date":"2026-01-15","vendor":"PowerCircle Management LLC","description":"Ward 1 Project Management Services","amount":3000.0,"fund_type":"Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"13227","is_credit":false},{"date":"2025-11-04","vendor":"Jamelle E. McKenzie","description":"Reimbursements for Ward 1 Expenditures","amount":853.89,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"249813","is_credit":false},{"date":"2025-11-05","vendor":"Mario Malcolm","description":"Ward 1 Community & Partner Relations Specialist","amount":3000.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"249959","is_credit":false},{"date":"2025-11-09","vendor":"Jamelle E. McKenzie","description":"Reimbursement for Ward 1 Expenditures","amount":387.76,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250759","is_credit":false},{"date":"2025-11-10","vendor":"Terico M. Harper","description":"November Video/Photography for Ward 1","amount":700.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"249966","is_credit":false},{"date":"2025-11-10","vendor":"Eight 11 Collective LLC","description":"Ward 1 Community Give Back / Youth Leadership","amount":5500.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"249952","is_credit":false},{"date":"2025-11-10","vendor":"Destination College Park","description":"3rd Installment - Ward 1 Community Enhancement Initiative","amount":10000.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250114","is_credit":false},{"date":"2025-11-10","vendor":"Eight 11 Collective LLC","description":"Ward 1 Planning Conf. Meeting Space & F&B Deposit","amount":1450.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250507","is_credit":false},{"date":"2025-11-12","vendor":"Power Co. Music LLC","description":"Ward 1 Veterans Day Event DJ","amount":375.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"249963","is_credit":false},{"date":"2025-11-12","vendor":"Ignite Resource Center CP Inc.","description":"Ward 1 Assistance Programming During Govt. Shutdown","amount":8000.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"249955","is_credit":false},{"date":"2025-11-12","vendor":"Conley Recreation Center","description":"Staff for Ward 1 Veteran's Program","amount":270.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"249949","is_credit":false},{"date":"2025-11-13","vendor":"Eleanor Cornelius (BIDA Board)","description":"Quarterly Professional Education Consultant","amount":2400.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12476","is_credit":false},{"date":"2025-11-13","vendor":"Venue Code 44","description":"Roses & Vases for Ward 1 Veteran's Day Event","amount":185.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12486","is_credit":false},{"date":"2025-11-18","vendor":"Mario Malcolm","description":"Ward 1 Community & Partner Relations Specialist","amount":3000.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12854","is_credit":false},{"date":"2025-11-20","vendor":"Venue Code 44","description":"Ward 1 Senior Thanksgiving Dinner","amount":275.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12552","is_credit":false},{"date":"2025-11-20","vendor":"Venue Code 44","description":"Community Engagement and Outreach - Mayor Pro Tem","amount":2500.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12692","is_credit":false},{"date":"2025-11-20","vendor":"Venue Code 44","description":"Ward 1 Flyers for Holiday Drive Promo","amount":1000.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12692","is_credit":false},{"date":"2025-11-20","vendor":"Food in the City","description":"End of Year Coordinator for Mayor Pro Tem McKenzie","amount":7000.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250202","is_credit":false},{"date":"2025-11-25","vendor":"Lovely Media LLC","description":"Main Street Train Depot Documentary - Ward 1","amount":12500.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250206","is_credit":false},{"date":"2025-11-25","vendor":"C'est La Vie Cafe","description":"Ward 1 Jingle and Mingle Winter Market","amount":515.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250218","is_credit":false},{"date":"2025-11-29","vendor":"Jamelle E. McKenzie","description":"Reimbursements for Ward 1 Expenditures","amount":324.11,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250204","is_credit":false},{"date":"2025-12-02","vendor":"Jay Productions Agency","description":"Ward 1 Community Events Consultant","amount":6000.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250205","is_credit":false},{"date":"2025-12-02","vendor":"Power Co. Music LLC","description":"DJ Services - Ward 1 Holiday Give Back","amount":600.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250224","is_credit":false},{"date":"2025-12-02","vendor":"Power Co. Music LLC","description":"DJ Services - Ward 1 Senior Christmas Holiday Dinner","amount":350.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250224","is_credit":false},{"date":"2025-12-02","vendor":"Jamelle E. McKenzie","description":"Reimbursement - Ward 1 Seniors Christmas Ornaments","amount":1366.99,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250951","is_credit":false},{"date":"2025-12-04","vendor":"Destination College Park","description":"4th Installment - Ward 1 Community Enhancement Initiative","amount":10000.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250221","is_credit":false},{"date":"2025-12-04","vendor":"College Park Historical Society","description":"Ward 1 Recognition Event and Advertising","amount":3500.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250948","is_credit":false},{"date":"2025-12-05","vendor":"Jamelle E. McKenzie","description":"Reimbursement - Ward 1 Holiday Giveback Toys & Items","amount":5460.7,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250510","is_credit":false},{"date":"2025-12-08","vendor":"Skylar Security","description":"Police Officers - Ward 1 Holiday Give Pack at Gateway Arena","amount":520.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12857","is_credit":false},{"date":"2025-12-08","vendor":"Jamelle E. McKenzie","description":"Reimbursement - Ward 1 Holiday Giveback Toys","amount":4720.25,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250510","is_credit":false},{"date":"2025-12-09","vendor":"U-Haul International Inc.","description":"Truck Rental for Ward 1","amount":457.4,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250719","is_credit":false},{"date":"2025-12-09","vendor":"Jamelle E. McKenzie","description":"Reimbursement - Volunteer Shirts, Holiday Giveback","amount":1179.9,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250510","is_credit":false},{"date":"2025-12-10","vendor":"Chuma Williams","description":"Ward 1 Community Event Items","amount":2115.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250422","is_credit":false},{"date":"2025-12-10","vendor":"Georgia Intl. BIDA Convention Center","description":"Holiday Buffet - Ward 1","amount":7000.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250508","is_credit":false},{"date":"2025-12-12","vendor":"Ignite Resource Center CP Inc.","description":"Ward 1 Additional Assistance During Govt. Shutdown","amount":1500.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250425","is_credit":false},{"date":"2025-12-16","vendor":"Eleanor Cornelius (BIDA Board)","description":"Ward 1 Seniors Holiday Dinner","amount":1200.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12847","is_credit":false},{"date":"2025-12-16","vendor":"One Talent Inc.","description":"Ward 1 Veteran's Service & Luncheon","amount":250.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"12943","is_credit":false},{"date":"2025-12-19","vendor":"Anchored Counseling LLC","description":"Ward 1 Post-Conference Final Report / 2026 Calendar","amount":4550.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250673","is_credit":false},{"date":"2025-12-22","vendor":"Jamelle E. McKenzie","description":"Reimbursement - Ward 1 Planning Conference Balance","amount":1837.06,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250951","is_credit":false},{"date":"2025-12-22","vendor":"Vietnam Veterans of America Ch. 1118","description":"Ward 1 Vietnam Veterans Community Outreach","amount":2500.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"13229","is_credit":false},{"date":"2025-12-23","vendor":"Jay Productions Agency","description":"Ward 1 Love Feast Food & Community Events","amount":6400.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250676","is_credit":false},{"date":"2026-01-03","vendor":"Jamelle E. McKenzie","description":"Reimbursement for Ward 1 Expenditures","amount":205.24,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250759","is_credit":false},{"date":"2026-01-05","vendor":"Jay Productions Agency","description":"Ward 1 Love Feast Food","amount":200.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250760","is_credit":false},{"date":"2026-01-05","vendor":"Mario Malcolm","description":"Ward 1 Community & Partner Relations Specialist","amount":3000.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"EFT","payment_number":"13082","is_credit":false},{"date":"2026-01-13","vendor":"Jay Productions Agency","description":"Ward 1 Flyer Designs for January","amount":200.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250952","is_credit":false},{"date":"2026-01-14","vendor":"Sakena Abernathy","description":"Ward 1 Professional Services for Community Event","amount":2352.68,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250953","is_credit":false},{"date":"2026-01-19","vendor":"Jamelle E. McKenzie","description":"Reimbursement - Ward 1 MLK Day Town Hall Lunch","amount":333.05,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250951","is_credit":false},{"date":"2026-01-21","vendor":"Jay Productions Agency","description":"Ward 1 Community Events Consultant & Custom Flyers","amount":6150.0,"fund_type":"Non-Capital","ward":"Ward 1","payment_type":"Check","payment_number":"250952","is_credit":false},{"date":"2025-07-01","vendor":"Jamelle E. McKenzie","description":"Constant Contact Reimbursements (Backlog)","amount":756.0,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"249081","is_credit":false},{"date":"2025-07-21","vendor":"Jamelle E. McKenzie","description":"Constant Contact - July 2025","amount":81.0,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"249081","is_credit":false},{"date":"2025-08-01","vendor":"Jamelle E. McKenzie","description":"Summer Interns Appreciation/Sendoff Lunch","amount":501.42,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"248641","is_credit":false},{"date":"2025-08-09","vendor":"Jamelle E. McKenzie","description":"Constant Contact - August 2025","amount":7.74,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"249081","is_credit":false},{"date":"2025-08-21","vendor":"Jamelle E. McKenzie","description":"Constant Contact - August 2025","amount":101.0,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"249081","is_credit":false},{"date":"2025-09-24","vendor":"Jamelle E. McKenzie","description":"Reimbursements for Ward 1 Expenditures","amount":451.52,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"249937","is_credit":false},{"date":"2025-10-23","vendor":"Jamelle E. McKenzie","description":"Ward 1 - T's Brunch Bar Grand Opening","amount":687.9,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"249786","is_credit":false},{"date":"2025-11-03","vendor":"Jamelle E. McKenzie","description":"Reimbursement for Ward 1 Community Meeting","amount":530.34,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"249956","is_credit":false},{"date":"2025-11-04","vendor":"Jamelle E. McKenzie","description":"Reimbursements for Ward 1 Expenditures","amount":11.3,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"249813","is_credit":false},{"date":"2025-11-20","vendor":"CSI Crane LLC","description":"Mayor Pro Tem Interview Prep","amount":350.0,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"250060","is_credit":false},{"date":"2025-12-19","vendor":"Jamelle E. McKenzie","description":"Ward 1 Staff Planning Conference Reimbursement","amount":850.0,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"250426","is_credit":false},{"date":"2026-01-08","vendor":"Jamelle E. McKenzie","description":"Retractable Banner - Ward 1","amount":131.88,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"250892","is_credit":false},{"date":"2026-01-13","vendor":"Jamelle E. McKenzie","description":"100 x 30-Gallon Storage Totes & Staff Lunches","amount":929.15,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"250951","is_credit":false},{"date":"2026-01-15","vendor":"Jamelle E. McKenzie","description":"Crisis Communications Services","amount":250.0,"fund_type":"Discretionary","ward":"Ward 1","payment_type":"Check","payment_number":"250951","is_credit":false}];

// ─── DEDUPLICATION ENGINE ────────────────────────────────
// Auto-runs on load. Deduplicates by (ward + payment_number + vendor + amount).
// This means future PDF batches can be appended freely — the dashboard
// will always self-correct for overlapping report date ranges.
(function dedup() {
  const seen = new Set();
  const clean = [];
  let removed = 0;
  for (const t of ALL_TRANSACTIONS) {
    // Only dedup transactions that have a payment number (checks/EFTs)
    // Transactions without a payment number are kept as-is
    const key = t.payment_number
      ? `${t.ward}|${t.payment_number}|${t.vendor}|${t.amount}`
      : null;
    if (key && seen.has(key)) {
      removed++;
    } else {
      if (key) seen.add(key);
      clean.push(t);
    }
  }
  ALL_TRANSACTIONS.length = 0;
  ALL_TRANSACTIONS.push(...clean);
  if (removed > 0) console.log(`[Dedup] Removed ${removed} duplicate transaction(s).`);
})();

// ─── CONSTANTS ───────────────────────────────────────────
const WARD_COLORS = {
  'Mayor':  '#8e44ad',
  'Ward 1': '#1a73e8',
  'Ward 2': '#27ae60',
  'Ward 3': '#e67e22',
  'Ward 4': '#e74c3c'
};
const FUND_COLORS = {
  'Capital':       '#1a73e8',
  'Non-Capital':   '#27ae60',
  'Discretionary': '#f4b942',
  'Travel & Meetings': '#8e44ad'
};
const WARD_BUDGETS = {
  'Mayor':  { 'Capital': 0, 'Non-Capital': 0, 'Discretionary': 50000 },
  'Ward 1': { 'Capital': 500000, 'Non-Capital': 400000 },
  'Ward 2': { 'Capital': 500000, 'Non-Capital': 400000 },
  'Ward 3': { 'Capital': 500000, 'Non-Capital': 400000 },
  'Ward 4': { 'Capital': 500000, 'Non-Capital': 400000 }
};
const WARDS = ['Mayor', 'Ward 1', 'Ward 2', 'Ward 3', 'Ward 4'];
const MONTHS = ['Jul','Aug','Sep','Oct','Nov','Dec','Jan'];
const MONTH_KEYS = ['2025-07','2025-08','2025-09','2025-10','2025-11','2025-12','2026-01'];

// ─── HELPERS ─────────────────────────────────────────────
const fmt = (n) => '$' + Math.abs(n).toLocaleString('en-US', {minimumFractionDigits:2, maximumFractionDigits:2});
const fmtK = (n) => n >= 1000 ? '$' + (n/1000).toFixed(0) + 'K' : fmt(n);

function wardTxs(ward) {
  return ALL_TRANSACTIONS.filter(t => t.ward === ward);
}
function charges(txs) {
  return txs.filter(t => !t.is_credit);
}
function totalAmt(txs) {
  return txs.reduce((s,t) => s + (t.is_credit ? -t.amount : t.amount), 0);
}
function chargeTotal(txs) {
  return txs.filter(t=>!t.is_credit).reduce((s,t)=>s+t.amount, 0);
}
function creditTotal(txs) {
  return txs.filter(t=>t.is_credit).reduce((s,t)=>s+t.amount, 0);
}

// ─── CHARTS REGISTRY ─────────────────────────────────────
const charts = {};
function destroyChart(id) {
  if (charts[id]) { charts[id].destroy(); delete charts[id]; }
}
function mkChart(id, cfg) {
  destroyChart(id);
  charts[id] = new Chart(document.getElementById(id).getContext('2d'), cfg);
  return charts[id];
}

// ─── SECTION ROUTING ─────────────────────────────────────
let currentWard = null;
let wardFilter = 'All';

function showSection(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById('sec-' + id).classList.add('active');
}

function showOverview() {
  currentWard = null;
  showSection('overview');
  document.getElementById('breadcrumb').innerHTML =
    '<span style="color:rgba(255,255,255,0.5)">All Wards Overview</span>';
  buildOverview();
}

function showWard(ward) {
  currentWard = ward;
  wardFilter = 'All';
  showSection('ward');
  const color = WARD_COLORS[ward];
  document.getElementById('breadcrumb').innerHTML =
    '<span onclick="showOverview()">All Wards Overview</span>' +
    '<span class="sep">/</span>' +
    '<span style="color:white">' + ward + '</span>';
  document.getElementById('ward-detail-title').innerHTML =
    '<span class="ward-dot" style="background:' + color + '"></span> ' + ward + ' Enhancement Fund';
  buildWardDetail(ward);
}

// ─── OVERVIEW ────────────────────────────────────────────
function buildOverview() {
  buildOverviewStats();
  buildWardCards();
  buildMonthlyAllChart();
  buildFundPieChart();
  buildVendorAllChart();
}

function buildOverviewStats() {
  const allCharges = chargeTotal(ALL_TRANSACTIONS);
  const allCredits = creditTotal(ALL_TRANSACTIONS);
  const net = allCharges - allCredits;
  const txCount = ALL_TRANSACTIONS.length;
  const vendorSet = new Set(ALL_TRANSACTIONS.filter(t=>!t.is_credit).map(t=>t.vendor));

  document.getElementById('overview-stats').innerHTML = `
    <div class="stat-card">
      <div class="stat-label">Total Spent (Net)</div>
      <div class="stat-val" style="color:var(--accent)">${fmt(net)}</div>
      <div class="stat-note">FY 2025–26 YTD</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Gross Expenditures</div>
      <div class="stat-val">${fmt(allCharges)}</div>
      <div class="stat-note">${fmt(allCredits)} in credits/refunds</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Transactions</div>
      <div class="stat-val">${txCount}</div>
      <div class="stat-note">Across 5 wards</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Unique Vendors</div>
      <div class="stat-val">${vendorSet.size}</div>
      <div class="stat-note">All wards combined</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Total Budget</div>
      <div class="stat-val">$3.6M</div>
      <div class="stat-note">$900K × 4 wards</div>
    </div>
  `;
}

function buildWardCards() {
  const grid = document.getElementById('ward-grid');
  grid.innerHTML = WARDS.map(ward => {
    const txs = wardTxs(ward);
    const net = totalAmt(txs);
    const color = WARD_COLORS[ward];
    let budget = 0, pct = 0, pctLabel = '';
    if (ward !== 'Mayor') {
      budget = 900000;
      pct = Math.min(100, net / budget * 100);
      pctLabel = pct.toFixed(1) + '% of $900K budget';
    } else {
      pctLabel = 'Discretionary & Travel';
    }
    const txCount = charges(txs).length;
    return `
      <div class="ward-card" style="--card-color:${color}" onclick="showWard('${ward}')">
        <div class="ward-card-title">${ward}</div>
        <div class="ward-card-amount">${fmt(net)}</div>
        <div class="ward-card-sub">${txCount} expenditures</div>
        ${budget > 0 ? `
          <div class="ward-card-bar"><div class="ward-card-fill" style="width:${pct}%"></div></div>
          <div class="ward-card-pct">${pctLabel}</div>
        ` : `<div class="ward-card-pct">${pctLabel}</div>`}
        <div class="ward-card-arrow">→</div>
      </div>`;
  }).join('');
}

function buildMonthlyAllChart() {
  const datasets = WARDS.map(ward => {
    const data = MONTH_KEYS.map(mk => {
      return chargeTotal(ALL_TRANSACTIONS.filter(t => t.ward === ward && !t.is_credit && t.date && t.date.startsWith(mk)));
    });
    return { label: ward, data, backgroundColor: WARD_COLORS[ward], borderRadius: 4 };
  });
  mkChart('monthlyAllChart', {
    type: 'bar',
    data: { labels: MONTHS, datasets },
    options: {
      responsive: true, maintainAspectRatio: false,
      plugins: { legend: { position: 'bottom' }, tooltip: { callbacks: { label: ctx => ctx.dataset.label + ': ' + fmt(ctx.raw) } } },
      scales: { x: { stacked: true }, y: { stacked: true, ticks: { callback: v => fmtK(v) } } }
    }
  });
}

function buildFundPieChart() {
  const fundTotals = {};
  ALL_TRANSACTIONS.filter(t => !t.is_credit).forEach(t => {
    fundTotals[t.fund_type] = (fundTotals[t.fund_type] || 0) + t.amount;
  });
  const labels = Object.keys(fundTotals);
  const data = labels.map(l => fundTotals[l]);
  const colors = labels.map(l => FUND_COLORS[l] || '#94a3b8');
  mkChart('fundPieChart', {
    type: 'doughnut',
    data: { labels, datasets: [{ data, backgroundColor: colors, borderWidth: 2 }] },
    options: {
      responsive: true, maintainAspectRatio: false,
      plugins: { legend: { position: 'bottom' }, tooltip: { callbacks: { label: ctx => ctx.label + ': ' + fmt(ctx.raw) } } }
    }
  });
}

function buildVendorAllChart() {
  const vendorTotals = {};
  ALL_TRANSACTIONS.filter(t => !t.is_credit).forEach(t => {
    vendorTotals[t.vendor] = (vendorTotals[t.vendor] || 0) + t.amount;
  });
  const sorted = Object.entries(vendorTotals).sort((a,b) => b[1]-a[1]).slice(0, 20);
  const labels = sorted.map(([v]) => v.length > 30 ? v.slice(0,28)+'…' : v);
  const vendorNames = sorted.map(([v]) => v);
  const data = sorted.map(([,a]) => a);
  const colors = sorted.map(([v]) => {
    const ward = ALL_TRANSACTIONS.find(t => t.vendor === v)?.ward;
    return WARD_COLORS[ward] || '#94a3b8';
  });
  mkChart('vendorAllChart', {
    type: 'bar',
    data: { labels, datasets: [{ label: 'Total Paid', data, backgroundColor: colors, borderRadius: 4 }] },
    options: {
      indexAxis: 'y', responsive: true, maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        tooltip: { callbacks: { label: ctx => fmt(ctx.raw) } }
      },
      scales: { x: { ticks: { callback: v => fmtK(v) } } },
      onClick: (e, els) => {
        if (els.length) openVendorModal(vendorNames[els[0].index]);
      },
      onHover: (e, els) => { e.native.target.style.cursor = els.length ? 'pointer' : 'default'; }
    }
  });
}

// ─── WARD DETAIL ─────────────────────────────────────────
let wardMonthlyChartObj = null;
let wardVendorChartObj = null;

function buildWardDetail(ward) {
  const txs = wardTxs(ward);
  buildWardGauges(ward, txs);
  buildWardMonthly(ward, txs);
  buildWardVendorChart(ward, txs);
  buildWardFilters(ward);
  renderWardTable();
}

function buildWardGauges(ward, txs) {
  const byFund = {};
  txs.forEach(t => {
    if (!byFund[t.fund_type]) byFund[t.fund_type] = {charges: 0, credits: 0};
    if (t.is_credit) byFund[t.fund_type].credits += t.amount;
    else byFund[t.fund_type].charges += t.amount;
  });

  const budgets = WARD_BUDGETS[ward] || {};
  const fundOrder = ['Capital', 'Non-Capital', 'Discretionary', 'Travel & Meetings'];
  const gauges = fundOrder.filter(f => byFund[f]).map(fund => {
    const {charges, credits} = byFund[fund];
    const net = charges - credits;
    const budget = budgets[fund] || 0;
    const pct = budget > 0 ? Math.min(100, net / budget * 100) : null;
    const color = FUND_COLORS[fund] || '#94a3b8';
    const pctColor = pct === null ? color : pct > 85 ? '#e74c3c' : pct > 60 ? '#e67e22' : color;
    return `
      <div class="gauge-card">
        <div class="gauge-label">${fund}</div>
        <div class="gauge-amount" style="color:${color}">${fmt(net)}</div>
        ${budget > 0 ? `
          <div class="gauge-budget">of ${fmt(budget)} budget</div>
          <div class="gauge-bar-bg"><div class="gauge-bar-fill" style="width:${pct.toFixed(1)}%;background:${pctColor}"></div></div>
          <div class="gauge-pct" style="color:${pctColor}">${pct.toFixed(1)}% used</div>
        ` : `<div class="gauge-budget">No cap budgeted</div>`}
      </div>`;
  });
  document.getElementById('ward-gauges').innerHTML = gauges.join('');
}

function buildWardMonthly(ward, txs) {
  const funds = [...new Set(txs.filter(t=>!t.is_credit).map(t=>t.fund_type))];
  const datasets = funds.map(fund => ({
    label: fund,
    data: MONTH_KEYS.map(mk => chargeTotal(txs.filter(t => t.fund_type === fund && !t.is_credit && t.date && t.date.startsWith(mk)))),
    backgroundColor: FUND_COLORS[fund] || '#94a3b8',
    borderRadius: 4
  }));
  mkChart('wardMonthlyChart', {
    type: 'bar',
    data: { labels: MONTHS, datasets },
    options: {
      responsive: true, maintainAspectRatio: false,
      plugins: { legend: { position: 'bottom' }, tooltip: { callbacks: { label: ctx => ctx.dataset.label + ': ' + fmt(ctx.raw) } } },
      scales: { x: { stacked: true }, y: { stacked: true, ticks: { callback: v => fmtK(v) } } }
    }
  });
}

function buildWardVendorChart(ward, txs) {
  const vendorTotals = {};
  txs.filter(t=>!t.is_credit).forEach(t => {
    vendorTotals[t.vendor] = (vendorTotals[t.vendor]||0) + t.amount;
  });
  const sorted = Object.entries(vendorTotals).sort((a,b)=>b[1]-a[1]).slice(0,12);
  const labels = sorted.map(([v]) => v.length > 28 ? v.slice(0,26)+'…' : v);
  const vendorNames = sorted.map(([v]) => v);
  const data = sorted.map(([,a]) => a);
  const color = WARD_COLORS[ward];
  mkChart('wardVendorChart', {
    type: 'bar',
    data: { labels, datasets: [{ label: 'Amount', data, backgroundColor: color + 'cc', borderRadius: 4 }] },
    options: {
      indexAxis: 'y', responsive: true, maintainAspectRatio: false,
      plugins: { legend: { display: false }, tooltip: { callbacks: { label: ctx => fmt(ctx.raw) } } },
      scales: { x: { ticks: { callback: v => fmtK(v) } } },
      onClick: (e, els) => { if (els.length) openVendorModal(vendorNames[els[0].index]); },
      onHover: (e, els) => { e.native.target.style.cursor = els.length ? 'pointer' : 'default'; }
    }
  });
}

function buildWardFilters(ward) {
  const txs = wardTxs(ward);
  const funds = ['All', ...[...new Set(txs.map(t=>t.fund_type))].sort()];
  document.getElementById('ward-filters').innerHTML = funds.map(f =>
    `<button class="filter-pill ${f === wardFilter ? 'active' : ''}" onclick="setWardFilter('${f}')">${f}</button>`
  ).join('');
}

function setWardFilter(f) {
  wardFilter = f;
  document.querySelectorAll('.filter-pill').forEach(p => p.classList.remove('active'));
  event.target.classList.add('active');
  renderWardTable();
}

function renderWardTable() {
  if (!currentWard) return;
  const search = (document.getElementById('ward-search').value || '').toLowerCase();
  let txs = wardTxs(currentWard);
  if (wardFilter !== 'All') txs = txs.filter(t => t.fund_type === wardFilter);
  if (search) txs = txs.filter(t =>
    t.vendor.toLowerCase().includes(search) ||
    (t.description||'').toLowerCase().includes(search)
  );
  txs = [...txs].sort((a,b) => b.date.localeCompare(a.date));
  const fundClass = f => 'fund-' + f.replace(/[^a-zA-Z]/g,'');
  const tbody = document.getElementById('ward-table-body');
  tbody.innerHTML = txs.map(t => `
    <tr class="${t.is_credit ? 'credit-row' : ''}">
      <td>${t.date}</td>
      <td><span class="fund-badge ${fundClass(t.fund_type)}">${t.fund_type}</span></td>
      <td><span class="vendor-link" onclick="openVendorModal('${t.vendor.replace(/'/g,"\'")}')">` +
        (t.vendor.length > 32 ? t.vendor.slice(0,30)+'…' : t.vendor) +
      `</span></td>
      <td style="color:var(--text2);font-size:0.8rem">${(t.description||'').slice(0,60)}</td>
      <td style="font-size:0.78rem;color:var(--text2)">${t.payment_type||''} ${t.payment_number||''}</td>
      <td class="amount-cell" style="text-align:right;color:${t.is_credit?'var(--red)':'var(--text)'}">
        ${t.is_credit ? '-' : ''}${fmt(t.amount)}
      </td>
    </tr>`).join('');
  document.getElementById('ward-table-count').textContent =
    txs.length + ' transaction' + (txs.length !== 1 ? 's' : '') +
    ' · Total: ' + fmt(txs.reduce((s,t) => s + (t.is_credit ? -t.amount : t.amount), 0));
}

// ─── VENDOR MODAL ─────────────────────────────────────────
function openVendorModal(vendor) {
  const txs = ALL_TRANSACTIONS.filter(t => t.vendor === vendor);
  const gross = chargeTotal(txs);
  const wards = [...new Set(txs.map(t=>t.ward))];
  document.getElementById('modalVendorName').textContent = vendor;
  document.getElementById('modalTotal').textContent = fmt(gross);
  document.getElementById('modalCount').textContent = txs.filter(t=>!t.is_credit).length;
  document.getElementById('modalWards').textContent = wards.join(', ');
  const sorted = [...txs].sort((a,b) => b.date.localeCompare(a.date));
  document.getElementById('modalRows').innerHTML = sorted.map(t => `
    <tr>
      <td>${t.date}</td>
      <td><span class="ward-chip" style="background:${WARD_COLORS[t.ward]}22;color:${WARD_COLORS[t.ward]}">${t.ward}</span></td>
      <td><span class="fund-badge fund-${t.fund_type.replace(/[^a-zA-Z]/g,'')}">${t.fund_type}</span></td>
      <td style="font-size:0.8rem;color:var(--text2)">${t.description||'—'}</td>
      <td style="text-align:right;font-weight:700">${t.is_credit ? '-' : ''}${fmt(t.amount)}</td>
    </tr>`).join('');
  document.getElementById('vendorModal').classList.add('open');
}
function closeModal() {
  document.getElementById('vendorModal').classList.remove('open');
}

// ─── INIT ─────────────────────────────────────────────────
showOverview();
</script>
</body>
</html>